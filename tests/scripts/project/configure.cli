#!/usr/bin/env clitest --v0

include "../_include/common.cli.inc";

$ gel instance destroy -I project4 --force
%EXIT any
*

$ gel --version
? Gel CLI %{VERSION}

$ gel server list-versions
? ┌%{DATA}┬%{DATA}┬%{DATA}┐
? │%{DATA}│%{DATA}│%{DATA}│
repeat {
    choice {
        ? │ stable %{DATA}
        ? │ nightly %{DATA}
        ? │ testing %{DATA}
    }
}
? └%{DATA}┴%{DATA}┴%{DATA}┘

# =================================
# project4
# =================================


using tempdir;

# Bug: Windows doesn't support init in an existing directory
if TARGET_OS != "windows" {

    $ cp -R $INITIAL_PWD/../../proj/project4 .
    *

    cd project4;

    $ gel project init --non-interactive --no-migrations
    ! Found `gel.toml` in %{PATH}
    *
    ! Applying configuration...
    *
    ! Configuration applied.
    *

    $ gel configure apply
    *
    ! Applying configuration...
    *
    ! Configuration applied.
    *
}